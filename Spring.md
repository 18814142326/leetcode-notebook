## Spring的循环依赖和三级缓存

### 循环依赖

循环依赖是Spring依赖注入中存在的一个问题，在初始化A的时候需要注入B，于是要去找B的引用，但是B的初始化也需要用到A的引用，导致死锁。

Spring使用三级缓存去解决这个问题：
* 当A执行完构造器初始化时，需要对成员进行依赖注入，这时候A已经被放到第三级的缓存中了。
* 于是去找B，在对B实例化的过程中发现也需要A，先到一级缓存去找A，发现找不到，然后再去二级缓存，还是找不到，最后到了三级缓存找到A，并把A添加到二级缓存。
* 这时完成了B的实例化和注入，最后把B返回给A。

### 使用第三级缓存的原因

延迟A被代理的时间，等真正发生循环依赖的时候，再去进创建A的代理对象。

#### 如果是构造器中的循环依赖，则无法解决